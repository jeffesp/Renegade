<form action="/login" method="POST" id="login-form">
<fieldset>
    <legend>Login</legend>
<% if @showError %>
  <div class="alert alert-error">
    Email address or password incorrect. Please try again.
  </div>
<% end %>
    <div class="control-group">
        <label>Email Address:</label>
        <div class="input">
            <input type="text" id="email" name="email" />
        </div>
    </div>
    <div class="control-group">
        <label>Password:</label>
        <div class="input">
            <input type="password" id="password" name="password" />
        </div>
    </div>
    <input type="hidden" name="returnurl" value="<%= params[:returnurl] %>" />
    <div class="actions">
        <button class="btn primary" type="submit" name="signin">Sign In</button>
        <button class="btn" type="submit" name="cancel">Cancel</button>
    </div>
</fieldset>
</form>
<script type="text/javascript">
  onInit(function () {
      $("#login-form").validate({ 
        rules: { 
          email: { required: true, email:true }, 
          password: { required: true, minlength: 6 }
        },
        messages: {
          email: { requied: "An email address is required to login.", email: "The format of the email address was not reconginzed." },
          password: { requied: "Please enter a password.", minlength: "A password must be a least 6 characters long." }
        },
        errorClass: "help-inline",
        errorElement: "span",
        highlight: function(element, errorClass, validClass) {
          $(element).closest('.control-group').addClass('error');
        },
        unhighlight: function(element, errorClass, validClass) {
          $(element).closest('.control-group').removeClass('error');
        },
      });
    });
</script>
