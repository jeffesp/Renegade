<form class="form-horizontal well" action="/people" method="GET">
  <h2>Filter List </h2>
  <div class="control-group" >
    <label class="control-label">Gender</label>
    <div class="controls">
      <select id="gender" name="gender">
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="">Either</option>
      </select>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Role</label>
    <div class="controls">
      <select id="role" name="role">
          <option value="">Any</option>
          <option value="">Student</option>
          <option value="">Worker</option>
          <option value="">Student Worker</option>
      </select>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Meeting</label>
    <div class="controls">
      <select id="meeting" name="meeting">
        <option value="">Any</option>
        <% @meetings.each do |m| %>
          <option value="<%= m[:id] %>"><%= m[:name] %></option>
        <% end %>
      </select>
    </div>
  </div>
  <div class="control-group">
    <label class="control-label">Grade</label>
    <div class="controls">
      <select id="grade" name="grade">
        <option value="">Any</option>
        <% @grades.each do |g| %>
          <option value="<%= g %>"><%= g %></option>
        <% end %>
      </select>
      <div id="grade" class="btn-group" data-toggle="buttons-checkbox">
      </div>
    </div>
    <input type="hidden" id="grade" name="grade" />
  </div>
  <div class="form-actions">
    <button type="submit" id="update" class="btn btn-primary">Update</button>
    <button type="button" id="cancel" class="btn">Cancel</button>
  </div>
</form>

<% if params[:search] %>
  <h4>Names that contain: "<%= params[:search] %>"</h4>
<% end %>
<table class="table" id="people">
  <thead>
    <tr>
      <th>Name</th>
      <th>Gender</th>
      <th>Grade</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Meeting</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% @people.each do |person| %>
    <tr>
      <td><a href='<%= "/person/#{person[:id]}"%>'><%= person[:first_name] %> <%= person[:last_name] %></a></td>
      <td><%= person[:gender].capitalize %></td>
      <td><%= person[:grade] or 'N/A' %></td>
      <td><%= person[:phone] or 'N/A' %></td>
      <td><%= person[:address_line1] or 'N/A' %></td>
      <td>
        <%= @meetings[person[:meeting_id] - 1][:name] %> 
      </td> <!--HACK: -1 sucks here -->
      <td>
        <%= role_icons(person[:type]) %>
      </td>
    </tr>
  <% end %>
</tbody>
</table>

<div class="row well">
  <a class="btn btn-primary" href='<%= "/add/person" %>'>Add New</a>
</div>
<script type="text/javascript">
  $(function () {

  });
</script>
